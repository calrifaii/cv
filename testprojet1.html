<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Phaser Shapes + Text Generator</title>
<script src="https://cdn.jsdelivr.net/npm/phaser@3.85.0/dist/phaser.js"></script>
<style>
body { margin:0; padding:0; display:flex; font-family:Arial,sans-serif; overflow:hidden; background:#b8ffb8; }
#phaser-example { width:70vw; height:100vh; }
#right-panel { width:30vw; height:100vh; background:rgba(255,255,255,0.95); padding:20px; box-sizing:border-box; backdrop-filter:blur(5px); display:flex; flex-direction:column; }
#right-panel h2 { margin-top:0; color:#ff3eb5; font-size:22px; text-align:center; margin-bottom:15px; }
#text-input { width:100%; padding:10px; font-size:16px; margin-bottom:12px; border:2px solid #ff3eb5; border-radius:8px; outline:none; transition:all 0.3s ease; }
#text-input:focus { box-shadow:0 0 10px rgba(255,62,181,0.3); transform:translateY(-2px); }
#generate-btn { width:100%; padding:10px; background:#ff3eb5; color:white; border:none; border-radius:8px; font-size:16px; cursor:pointer; transition:all 0.3s ease; font-weight:600; margin-bottom:15px; }
#generate-btn:hover { transform:translateY(-2px); box-shadow:0 5px 15px rgba(255,62,181,0.3); }
#generate-btn:active { transform:translateY(0); }
#font-selection { margin-bottom:15px; padding:10px 0; border-bottom:1px solid #eee; display:flex; align-items:center; justify-content:center; font-weight:600; color:#ff3eb5; }
#font-select { margin-left:10px; padding:5px; border:1px solid #ff3eb5; border-radius:4px; outline:none; }
#color-selection { display:flex; justify-content:space-around; margin-bottom:15px; padding:10px 0; border-top:1px solid #eee; border-bottom:1px solid #eee; }
.color-option { width:30px; height:30px; border-radius:50%; cursor:pointer; border:3px solid transparent; transition:all 0.2s ease; }
.color-option:hover { transform:scale(1.1); }
.color-option.selected { border-color:#333; box-shadow:0 0 8px rgba(0,0,0,0.3); }
.history-section { flex:1; display:flex; flex-direction:column; margin-top:10px; }
.history-title { font-size:14px; font-weight:700; color:#ff3eb5; text-transform:uppercase; letter-spacing:1px; margin-bottom:10px; }
#history-list { flex:1; display:flex; flex-direction:column; gap:8px; overflow-y:auto; margin-bottom:10px; }
#history-list::-webkit-scrollbar { width:6px; }
#history-list::-webkit-scrollbar-track { background: rgba(255,62,181,0.1); border-radius:10px; }
#history-list::-webkit-scrollbar-thumb { background:#ff3eb5; border-radius:10px; }
.history-item { padding:10px; background:rgba(255,62,181,0.08); border:1px solid rgba(255,62,181,0.2); border-radius:6px; cursor:pointer; transition:all 0.3s ease; font-size:12px; color:#333; word-break:break-word; font-weight:500; }
.history-item:hover { background: rgba(255,62,181,0.15); border-color:#ff3eb5; transform:translateX(3px); }
.history-item.active { background:#ff3eb5; color:white; border-color:#ff3eb5; font-weight:600; }
.clear-history-btn { width:100%; padding:8px; background:rgba(255,62,181,0.1); color:#ff3eb5; border:none; border-radius:6px; cursor:pointer; transition:all 0.3s ease; font-weight:600; }
.clear-history-btn:hover { background:rgba(255,62,181,0.2); }
</style>
</head>
<body>
<div id="phaser-example"></div>
<div id="right-panel">
  <h2>Text Generator</h2>
  <input type="text" id="text-input" placeholder="Enter text..."/>
  <div id="font-selection">Font:
    <select id="font-select">
      <option value="Arial">Arial</option>
      <option value="Verdana">Verdana</option>
      <option value="Georgia">Georgia</option>
      <option value="Courier">Courier</option>
      <option value="Tahoma">Tahoma</option>
    </select>
  </div>
  <div id="color-selection">
    <div class="color-option selected" style="background:red" data-color="red"></div>
    <div class="color-option" style="background:blue" data-color="blue"></div>
    <div class="color-option" style="background:green" data-color="green"></div>
    <div class="color-option" style="background:orange" data-color="orange"></div>
    <div class="color-option" style="background:purple" data-color="purple"></div>
  </div>
  <button id="generate-btn">Generate</button>
  <div class="history-section">
    <div class="history-title">History</div>
    <div id="history-list"></div>
    <button class="clear-history-btn">Clear History</button>
  </div>
</div>

<script>
const config = {
  type: Phaser.AUTO,
  parent: 'phaser-example',
  width: window.innerWidth*0.7,
  height: window.innerHeight,
  backgroundColor: '#b8ffb8',
  scene: {
    preload: preload,
    create: create,
    update: update
  }
};
const game = new Phaser.Game(config);

let shapes = [];
let colors = ['red','blue','green','orange','purple'];
let currentText = null;
let textSound;

function preload(){
  this.load.audio('clickSound', 'https://freesound.org/data/previews/522/522030_1161975-lq.mp3');
}

function create(){
  const scene = this;
  textSound = this.sound.add('clickSound',{volume:0.2});

  // create random shapes
  for(let i=0;i<20;i++){
    let color = Phaser.Utils.Array.GetRandom(colors);
    let x = Phaser.Math.Between(50,scene.sys.canvas.width-50);
    let y = Phaser.Math.Between(50,scene.sys.canvas.height-50);
    let size = Phaser.Math.Between(20,70);
    let type = Phaser.Math.Between(0,2); // 0:circle,1:rect,2:triangle
    let shape;
    if(type===0) shape = scene.add.circle(x,y,size,color).setAlpha(0.6);
    else if(type===1) shape = scene.add.rectangle(x,y,size,size,color).setAlpha(0.6);
    else{
      let graphics = scene.add.graphics({fillStyle:{color:Phaser.Display.Color.HexStringToColor(color).color, alpha:0.6}});
      graphics.fillTriangle(-size/2,size/2,0,-size/2,size/2,size/2);
      graphics.x = x; graphics.y = y; shape = graphics;
    }
    shapes.push({obj:shape,type:type,color:color,speedX:Phaser.Math.Between(-2,2),speedY:Phaser.Math.Between(-2,2)});
  }

  // mouse flee effect
  scene.input.on('pointermove',function(pointer){
    shapes.forEach(s=>{
      let dx = s.obj.x-pointer.x;
      let dy = s.obj.y-pointer.y;
      let dist = Math.sqrt(dx*dx+dy*dy);
      if(dist<100){
        s.obj.x += dx*0.05;
        s.obj.y += dy*0.05;
      }
    });
  });

  // generate button
  document.getElementById('generate-btn').addEventListener('click',function(){
    let txt = document.getElementById('text-input').value;
    if(!txt) return;
    let color = document.querySelector('.color-option.selected').dataset.color;
    let font = document.getElementById('font-select').value;

    // play sound
    textSound.play();

    // old text animation out
    if(currentText){
      game.scene.scenes[0].tweens.add({targets:currentText,x:'+='+200,alpha:0,duration:300,onComplete:()=>currentText.destroy()});
    }

    // create new text
    currentText = game.scene.scenes[0].add.text(-200,config.height/2,txt,{fontFamily:font,fontSize:'48px',color:color});
    game.scene.scenes[0].tweens.add({targets:currentText,x:config.width/2,y:config.height/2,alpha:1,duration:400,ease:'Power2'});

    // add to history
    addHistory(txt,color,font);
  });

  // color selection
  document.querySelectorAll('.color-option').forEach(el=>{
    el.addEventListener('click',()=>{
      document.querySelectorAll('.color-option').forEach(c=>c.classList.remove('selected'));
      el.classList.add('selected');
    });
  });

  // history clear
  document.querySelector('.clear-history-btn').addEventListener('click',()=>{
    document.getElementById('history-list').innerHTML='';
  });
}

function update(){
  shapes.forEach(s=>{
    s.obj.x += s.speedX;
    s.obj.y += s.speedY;
    if(s.obj.x<0 || s.obj.x>config.width) s.speedX*=-1;
    if(s.obj.y<0 || s.obj.y>config.height) s.speedY*=-1;
  });
}

// history functions
function addHistory(txt,color,font){
  const div = document.createElement('div');
  div.classList.add('history-item');
  div.textContent = txt;
  div.style.color=color;
  div.addEventListener('click',()=>{
    document.getElementById('text-input').value = txt;
    document.querySelectorAll('.color-option').forEach(c=>{
      c.classList.remove('selected');
      if(c.dataset.color===color) c.classList.add('selected');
    });
    document.getElementById('font-select').value = font;
  });
  document.getElementById('history-list').prepend(div);
}
</script>
</body>
</html>
